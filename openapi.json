{"openapi": "3.1.0", "info": {"title": "TinyMotion", "version": "0.5.1.dev5+gc8422be"}, "paths": {"/v1/token/": {"post": {"tags": ["token"], "summary": "Login For Tokens", "description": "Login to get access and refresh tokens to use with future requests.", "operationId": "login_for_tokens_v1_token__post", "requestBody": {"content": {"application/x-www-form-urlencoded": {"schema": {"allOf": [{"$ref": "#/components/schemas/Body_login_for_tokens_v1_token__post"}], "title": "Body"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Token"}}}}, "400": {"description": "Bad Request", "content": {"application/json": {"example": {"detail": "Login disabled for user"}}}}, "401": {"description": "Unauthorized", "content": {"application/json": {"example": {"detail": "Incorrect access key"}}}}, "404": {"description": "Not Found", "content": {"application/json": {"example": {"detail": "User not found"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/v1/infants/": {"post": {"tags": ["infants"], "summary": "Create Infant", "description": "Create an infant", "operationId": "create_infant_v1_infants__post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/InfantCreate"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/InfantOut"}}}}, "401": {"description": "Unauthorized", "content": {"application/json": {"example": {"detail": "Not authenticated"}}}}, "409": {"description": "Conflict Error", "content": {"application/json": {"example": {"detail": "Failed to create infant due to unique constraint"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"OAuth2PasswordBearer": []}]}}, "/v1/consents/": {"post": {"tags": ["consents"], "summary": "Create Consent", "description": "Create a consent linked to an infant", "operationId": "create_consent_v1_consents__post", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/ConsentCreateViaNHI"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ConsentOut"}}}}, "400": {"description": "Bad Request Error", "content": {"application/json": {"example": {"detail": "Must specify `consent_giver_name` when not specifying `collected_physically`"}}}}, "401": {"description": "Unauthorized", "content": {"application/json": {"example": {"detail": "Not authenticated"}}}}, "404": {"description": "Not Found Error", "content": {"application/json": {"example": {"detail": "An infant with the specified NHI number does not exist"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"OAuth2PasswordBearer": []}]}}, "/v1/videos/": {"post": {"tags": ["videos"], "summary": "Upload Video", "description": "Upload a video associated with an infant", "operationId": "upload_video_v1_videos__post", "requestBody": {"content": {"multipart/form-data": {"schema": {"$ref": "#/components/schemas/Body_upload_video_v1_videos__post"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/VideoOut"}}}}, "400": {"description": "Bad Request Error", "content": {"application/json": {"example": {"detail": "No consent exists"}}}}, "401": {"description": "Unauthorized", "content": {"application/json": {"example": {"detail": "Not authenticated"}}}}, "404": {"description": "Not Found Error", "content": {"application/json": {"example": {"detail": "An infant with the specified NHI number does not exist"}}}}, "409": {"description": "Conflict Error", "content": {"application/json": {"example": {"detail": "Verification of the SHA256 checksum of the uploaded video failed"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"OAuth2PasswordBearer": []}]}}}, "components": {"schemas": {"Body_login_for_tokens_v1_token__post": {"properties": {"grant_type": {"type": "string", "pattern": "password|refresh_token", "title": "Grant Type"}, "username": {"type": "string", "title": "Username", "default": ""}, "password": {"type": "string", "title": "Password", "default": ""}, "refresh_token": {"type": "string", "title": "Refresh Token", "default": ""}, "scope": {"type": "string", "title": "Scope", "default": ""}, "client_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Client Id"}, "client_secret": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Client Secret"}}, "type": "object", "title": "Body_login_for_tokens_v1_token__post"}, "Body_upload_video_v1_videos__post": {"properties": {"video": {"type": "string", "format": "binary", "title": "Video", "description": "Video file"}, "nhi_number": {"type": "string", "minLength": 1, "title": "Nhi Number", "description": "NHI number of the infant in the video"}, "checksum_sha256": {"type": "string", "maxLength": 64, "minLength": 64, "title": "Checksum Sha256", "description": "The SHA256 checksum to verify the integrity of the uploaded video"}}, "type": "object", "required": ["video", "nhi_number", "checksum_sha256"], "title": "Body_upload_video_v1_videos__post"}, "ConsentCreateViaNHI": {"properties": {"consent_giver_name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Consent Giver Name"}, "consent_giver_email": {"anyOf": [{"type": "string", "format": "email"}, {"type": "null"}], "title": "Consent Giver Email"}, "collected_physically": {"type": "boolean", "title": "Collected Physically", "description": "An electronic consent is not required because a physical consent exists", "default": false}, "nhi_number": {"type": "string", "title": "Nhi Number"}}, "type": "object", "required": ["nhi_number"], "title": "ConsentCreateViaNHI"}, "ConsentOut": {"properties": {"consent_giver_name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Consent Giver Name"}, "consent_giver_email": {"anyOf": [{"type": "string", "format": "email"}, {"type": "null"}], "title": "Consent Giver Email"}, "collected_physically": {"type": "boolean", "title": "Collected Physically", "description": "An electronic consent is not required because a physical consent exists", "default": false}, "consent_id": {"type": "integer", "title": "Consent Id"}, "infant_id": {"type": "integer", "title": "Infant Id"}, "created_at": {"type": "string", "format": "date-time", "title": "Created At"}, "created_by": {"type": "integer", "title": "Created By"}}, "type": "object", "required": ["consent_id", "infant_id", "created_at", "created_by"], "title": "ConsentOut"}, "HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "InfantCreate": {"properties": {"full_name": {"type": "string", "title": "Full Name"}, "birth_date": {"type": "string", "format": "date", "title": "Birth Date"}, "due_date": {"type": "string", "format": "date", "title": "Due Date"}, "nhi_number": {"type": "string", "title": "Nhi Number", "description": "The NHI number must be unique"}}, "type": "object", "required": ["full_name", "birth_date", "due_date", "nhi_number"], "title": "InfantCreate"}, "InfantOut": {"properties": {"full_name": {"type": "string", "title": "Full Name"}, "birth_date": {"type": "string", "format": "date", "title": "Birth Date"}, "due_date": {"type": "string", "format": "date", "title": "Due Date"}, "nhi_number": {"type": "string", "title": "Nhi Number", "description": "The NHI number must be unique"}, "infant_id": {"type": "integer", "title": "Infant Id"}}, "type": "object", "required": ["full_name", "birth_date", "due_date", "nhi_number", "infant_id"], "title": "InfantOut"}, "Token": {"properties": {"access_token": {"type": "string", "title": "Access Token"}, "refresh_token": {"type": "string", "title": "Refresh Token"}, "token_type": {"type": "string", "title": "Token Type"}, "expires_in": {"type": "integer", "title": "Expires In"}}, "type": "object", "required": ["access_token", "refresh_token", "token_type", "expires_in"], "title": "Token"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}, "VideoOut": {"properties": {"video_name": {"type": "string", "title": "Video Name"}, "sha256sum": {"type": "string", "maxLength": 64, "minLength": 64, "title": "Sha256Sum"}, "video_id": {"type": "integer", "title": "Video Id"}, "infant_id": {"type": "integer", "title": "Infant Id"}, "created_at": {"type": "string", "format": "date-time", "title": "Created At"}, "created_by": {"type": "integer", "title": "Created By"}, "video_size": {"type": "integer", "title": "Video Size"}}, "type": "object", "required": ["video_name", "sha256sum", "video_id", "infant_id", "created_at", "created_by", "video_size"], "title": "VideoOut"}}, "securitySchemes": {"OAuth2PasswordBearer": {"type": "oauth2", "flows": {"password": {"scopes": {}, "tokenUrl": "/v1/token"}}}}}}